/* Jogo do Caos */
programa JogoDoCaos;
inclui "gra*";
inclui "evnt*";
inclui "ggra.pac";

const
  XORIG = 200;
  YORIG = 200;
  X1 = -190.0; Y1 = -100.0;
  X2 = 0.0;    Y2 = 190.0;
  X3 = 190.0;  Y3 = -100.0;

tipo
  Triângulo = arranjo [0..2] de Ponto;

/* marque - desenha pequena marca em p */
procedimento marque(p: Ponto);
início
  gAltPixel(Tela, p, COR_VERDE);
fim;

/* próximoPto - obtém o próximo ponto */
função próximoPto(t: Triângulo; p: Ponto): Ponto;
início
  retorne ptoMédio(p, t[random(3)]);
fim;

const
  N = 50000; // número de "jogadas"

var
  t: Triângulo;
  p: Ponto;
  i: inteiro;
início
  /* marca os pontos do triângulo */
  t[0] := pto(X1, Y1); marque(t[0]);
  t[1] := pto(X2, Y2); marque(t[1]);
  t[2] := pto(X3, Y3); marque(t[2]);

  /* escolhe o primeiro ponto */
  p := pto(0, 0);

  /* determina a origem na tela */
  gAltOrig(XORIG, YORIG);

  /* joga */  
  para (i := 0; i < N; inc(i))
  início
    p := próximoPto(t, p);
    marque(p);
  fim;
fim.
